<ion-view view-title="Sign Up">

  <ion-content class="padding">

    <form novalidate="novalidate" autocomplete="off" name="signupForm" ng-submit="doRegister(signupForm)">
      <div class="list">

        <label class="item item-input item-icon-left"
               ng-class="{ 'label-has-error': (signupForm.name.$dirty || signupForm.$submitted) && signupForm.name.$invalid }">
          <i class="icon ion-person"
             ng-class="{ 'icon-has-error': (signupForm.name.$dirty || signupForm.$submitted) && signupForm.name.$invalid }"></i>
          <input type="text"
                 class="indent"
                 placeholder="Full Name"
                 name="name"
                 ng-model="formData.name"
                 ng-pattern="/^[a-zA-Z ]{2,}$/"
                 ng-required="true">
        </label>

        <label class="item item-input item-icon-left item-icon-right margin-top"
               ng-class="{ 'label-has-error': (signupForm.phone.$dirty || signupForm.$submitted) && signupForm.phone.$invalid }">
          <i class="icon ion-android-phone-portrait"
             ng-class="{ 'icon-has-error': (signupForm.phone.$dirty || signupForm.$submitted) && signupForm.phone.$invalid }"></i>
          <input type="text"
                 class="indent"
                 placeholder="Phone Number"
                 name="phone"
                 ng-model="formData.phone"
                 ng-model-options="{ updateOn: 'blur' }"
                 ng-pattern="/^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$/"
                 ng-required="true"
                 phone-available>
          <ion-spinner icon="ios-small" class="spinner-dark spinner-align"
                       ng-show="signupForm.phone.$pending"></ion-spinner>
          <i class="icon icon-right ion-ios-checkmark-empty" ng-show="signupForm.phone.$valid"></i>
        </label>
        <div class="error-statement" ng-show="signupForm.phone.$unavailable">this phone has already been taken
        </div>

        <label class="item item-input item-icon-left item-icon-right margin-top"
               ng-class="{ 'label-has-error': (signupForm.email.$dirty || signupForm.$submitted) && signupForm.email.$invalid }">
          <i class="icon ion-email"
             ng-class="{ 'icon-has-error': (signupForm.email.$dirty || signupForm.$submitted) && signupForm.email.$invalid }"></i>
          <input type="text" class="indent" placeholder="Email" name="email" ng-model="formData.email"
                 ng-model-options="{ updateOn: 'blur' }"
                 ng-pattern="/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i"
                 ng-required="true" email-available>
          <ion-spinner icon="ios-small" class="spinner-dark spinner-align"
                       ng-show="signupForm.email.$pending"></ion-spinner>
          <i class="icon icon-right ion-ios-checkmark-empty" ng-show="signupForm.email.$valid"></i>
        </label>
        <div class="error-statement" ng-show="signupForm.email.$unavailable">this email has already been taken
        </div>

        <label class="item item-input item-icon-left margin-top"
               ng-class="{ 'label-has-error': (signupForm.password.$dirty || signupForm.$submitted) && signupForm.password.$invalid }">
          <i class="icon ion-ios-unlocked"
             ng-class="{ 'icon-has-error': (signupForm.password.$dirty || signupForm.$submitted) && signupForm.password.$invalid }"></i>
          <input type="password" class="indent" placeholder="Password" name="password"
                 ng-model="formData.password"
                 ng-pattern="/^.{3,}$/" ng-required="true">
        </label>

        <label class="item item-input item-icon-left margin-top"
               ng-class="{ 'label-has-error': (signupForm.confirmPassword.$dirty || signupForm.$submitted) && (signupForm.password.$invalid || signupForm.confirmPassword.$invalid) }">
          <i class="icon ion-ios-unlocked"
             ng-class="{'icon-has-error': (signupForm.confirmPassword.$dirty || signupForm.$submitted) && (signupForm.password.$invalid || signupForm.confirmPassword.$invalid)}"></i>
          <input type="password" class="indent" placeholder="Retype Password" name="confirmPassword"
                 ng-model="formData.confirmPassword" ng-pattern="{{signupForm.password.$viewValue}}"
                 ng-required="true">
        </label>

        <label class="item item-input item-icon-left margin-top">
          <i class="icon ion-link"></i>
          <input type="text" class="indent" placeholder="Referral (if any)" name="referral"
                 ng-model="formData.referral">
        </label>

      </div>

      <button class="button button-block button-positive" type="submit" ng-disabled="signupForm.$pending">Create a new account</button>
      <a nav-direction="back" class="button button-block button-positive" ui-sref="login">Already a member? Sign In</a>

    </form>

  </ion-content>

  <div class="bar bar-stable bar-footer">
    <button class="icon-right ion-information-circled button button-stable pull-right" ng-click="help()">HELP</button>
  </div>

</ion-view>